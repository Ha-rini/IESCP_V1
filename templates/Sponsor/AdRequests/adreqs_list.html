{% extends 'layout.html' %}

{% block content %}


<h4 class="headings">Active Ad Requests</h4>
    <div id="trans-table">
        <a type="button" href="{{url_for('add_adreq',id=campaign.id)}}"><button class="btn btn-primary">Create +</button></a>
    </div>
    <hr>
    {% if other_adreqs|length == 0 %}
    <h6>No Ads</h6>
    {% else %}
    <div id="trans-table">
        <table class="table">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Influencer Name</th>                    
                <th scope="col">Campaign Name</th>                    
                <th scope="col">Requirements</th>
                <th scope="col">Payment Amount</th>
                <th scope="col">Message</th>
                <th scope="col">Status</th>
                <th scope="col">Actions</th>     
                                    
            </tr>
            </thead>
            <tbody>
                {% for a in other_adreqs %}
                <tr>
                    <th scope="row">{{loop.index}}</th>
                    <td>{{a.influencer.name}}</td>
                    <td>{{a.campaign.camp_name}} </td> 
                    <td>{{a.requirements}}</td>
                    <td>{{a.pay_amt}}</td>
                    <td>{{a.message}}</td>
                    <td>{{a.status}}</td>                            
                    <td>
                        {% if a.status != "rejected" %}
                        <a href="{{url_for('edit_adreq',id=campaign.id,ad_id=a.id)}}" type="button" class="btn btn-success mb-3"><i class="fa fa-pencil" aria-hidden="true"></i> Edit</a>
                        <a href="{{url_for('delete_adreq',id=campaign.id,ad_id=a.id)}}" type="button" class="btn btn-danger mb-3" ><i class="fa fa-trash" aria-hidden="true"></i> Delete</a>                        
                        {% else %}
                        <p><b>No actions can be performed.</b></p>
                        {% endif %}
                        
                    </td>
                </tr> 
                {% endfor %}                 
            </tbody>
        </table>
    </div>
    {% endif %}
    <hr>
    <br>

    <h4 class="headings">Requests from Influencers</h4>
    <hr>
    {% if req_adreqs|length == 0 %}
    <h6>No Ads</h6>
    {% else %}
    <div id="trans-table">
        <table class="table">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Influencer Name</th>                    
                <th scope="col">Campaign Name</th>                    
                <th scope="col">Requirements</th>
                <th scope="col">Payment Amount</th>
                <th scope="col">Status</th>
                <th scope="col">Actions</th>     
                                    
            </tr>
            </thead>
            <tbody>
                {% for a in req_adreqs %}
                <tr>
                    <th scope="row">{{loop.index}}</th>
                    <td>{{a.influencer.name}}</td>
                    <td>{{a.campaign.camp_name}} </td> 
                    <td>{{a.requirements}}</td>
                    <td>{{a.pay_amt}}</td>
                    <td>{{a.status}}</td>                            
                    <td>
                        <a href="{{url_for('accept_adreq_from_influencer',ad_id=a.id)}}" type="button" class="btn btn-success">Accept</a>
                        <a href="{{url_for('reject_adreq_from_influencer',ad_id=a.id)}}" type="button" class="btn btn-danger" >Reject</a>                        
                    </td>
                </tr> 
                {% endfor %}                 
            </tbody>
        </table>
    </div>
    {% endif %}
    <hr>
    <br>

    <h4 class="headings">Completed Ad Requests</h4>
    <hr>
    {% if completed_adreqs|length == 0 %}
    <h6>No Ads Completed</h6>
    {% else %}
    <div id="trans-table">
        <table class="table">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Influencer Name</th>                    
                <th scope="col">Campaign Name</th>                    
                <th scope="col">Requirements</th>
                <th scope="col">Payment Amount</th>
                <th scope="col">Message</th>
                <th scope="col">Status</th>                   
            </tr>
            </thead>
            <tbody>
                {% for a in completed_adreqs %}
                <tr>
                    <th scope="row">{{loop.index}}</th>
                    <td>{{a.influencer.name}}</td>
                    <td>{{a.campaign.camp_name}} </td> 
                    <td>{{a.requirements}}</td>
                    <td>{{a.pay_amt}}</td>
                    <td>{{a.message}}</td>
                    <td>{{a.status}}</td>                            
                </tr> 
                {% endfor %}                 
            </tbody>
        </table>
    </div>
    {% endif %}
    <hr>
    <br>

    
{% endblock %}